/*

This file will handle all the arguments checks
I used the singleton DP

*/


function Validator() {
	let failed;
	let value;

	this.validate = funciton(val) {
		value = val;
		failed = false;
		return this;
	}

	this.end = function (cb) {
		cb({failed, value});
		return failed;
	};


	// validate the type
	this.type = function(typeStr) {
		failed = failed || typeof(value) !== typeStr;
		return this;
	}

	// sometimes strings need to be trimmed
	this.trim = function() {
		value = value.trim();
		return this;
	}

	// validate a property
	this.key = function(key, check) {
		failed = failed || value[key] === undefined || !check(value[name]);
		return this;
	}

	// check on the length
	this.length = function(check) {
		failed = failed || !check(value.length);
		return this;
	}

	this.isArray = function() {
		return this.instanceof(Array);
	}

	//
	this.instanceof = function(object) {
		failed = failed || !(value instanceof object);
		return this;
	}
}



const lib = {};

lib.validator = new Validator();

module.exports = lib;
